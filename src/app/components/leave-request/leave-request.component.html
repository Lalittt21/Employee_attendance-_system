<div class="leave-container">
  <div class="page-header">
    <h1>Leave Request</h1>
  </div>

  <div class="form-section">
    <div class="form-card">
      <h2>Apply for Leave</h2>
      <form class="leave-form" (ngSubmit)="submitLeaveRequest()">
        <div class="form-group">
          <label for="employee">Employee:</label>
          <select id="employee" [(ngModel)]="selectedEmployeeId" name="employee">
            <option value="">-- Select an employee --</option>
            <option *ngFor="let emp of employees" [value]="emp.id">
              {{ emp.name }} ({{ emp.id }})
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="leaveType">Leave Type:</label>
          <select id="leaveType" [(ngModel)]="leaveRequest.leaveType" name="leaveType">
            <option value="">-- Select leave type --</option>
            <option *ngFor="let type of leaveTypes" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="startDate">Start Date:</label>
            <input 
              id="startDate" 
              type="date" 
              [(ngModel)]="leaveRequest.startDate" 
              name="startDate"
              required
            />
          </div>

          <div class="form-group">
            <label for="endDate">End Date:</label>
            <input 
              id="endDate" 
              type="date" 
              [(ngModel)]="leaveRequest.endDate" 
              name="endDate"
              required
            />
          </div>
        </div>

        <div class="form-group">
          <label for="reason">Reason:</label>
          <textarea 
            id="reason" 
            [(ngModel)]="leaveRequest.reason" 
            name="reason"
            rows="4"
            placeholder="Please provide the reason for your leave request"
          ></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Submit Request</button>
          <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset</button>
        </div>
      </form>
    </div>
  </div>

  <div class="requests-section" *ngIf="myLeaveRequests.length > 0">
    <h2>My Leave Requests</h2>
    <table class="leave-table">
      <thead>
        <tr>
          <th>Employee</th>
          <th>Leave Type</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Reason</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let req of myLeaveRequests" class="leave-row">
          <td>{{ req.employeeName }}</td>
          <td>{{ req.leaveType }}</td>
          <td>{{ req.startDate }}</td>
          <td>{{ req.endDate }}</td>
          <td>{{ req.reason }}</td>
          <td>
            <span class="status-badge" [ngClass]="req.status | lowercase">
              {{ req.status }}
            </span>
          </td>
          <td>
            <button 
              *ngIf="req.status === 'Pending'" 
              class="action-btn cancel-btn" 
              (click)="cancelLeaveRequest(req.id)"
              title="Cancel"
            >
              üóëÔ∏è
            </button>
            <span *ngIf="req.status !== 'Pending'" class="no-action">‚Äî</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="empty-state" *ngIf="myLeaveRequests.length === 0">
    <p>No leave requests yet. Submit one to get started!</p>
  </div>
</div>